<!DOCTYPE html>
<html lang="en">
<head>
    {% include 'header.html' %}
</head>
<body>
    <h1>Student List</h1>

    <!-- Form lọc theo lớp -->
    <form method="post">
        <label for="class">Select Class:</label>
        <select name="class" id="class" required>
            <option value="">-- Choose a Class --</option>
            {% for class_item in classes %}
            <option value="{{ class_item.class }}" 
                    {% if class_item.class == selected_class %} selected {% endif %}>
                {{ class_item.class }}
            </option>
            {% endfor %}
        </select>
        <button type="submit">Filter</button>
    </form>

    <!-- Bảng hiển thị sinh viên -->
    {% if students %}
    <table border="1">
        <thead>
            <tr>
                <th>ID</th>
                <th>Student ID</th>
                <th>Name</th>
                <th>Class</th>
                {% if session.get('lecturer_name') == "Admin" %}
                    <th>Actions</th>
                {% endif %}
            </tr>
        </thead>
        <tbody>
            {% for student in students %}
            <tr>
                <td>{{ student.id }}</td>
                <td>{{ student.idsv }}</td>
                <td>{{ student.users_name }}</td>
                <td>{{ student.class }}</td>
                {% if session.get('lecturer_name') == "Admin" %}
                <td>
                    <button 
                        style="background-color: #4CAF50; color: white; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer;"
                        onclick="window.location.href='{{ url_for('students.edit_student', id=student.id) }}';">
                        Edit
                    </button>
                    <form action="{{ url_for('students.delete_student', id=student.id) }}" method="post" style="display:inline;">
                        <button type="submit">Delete</button>
                    </form>
                </td>
                {% endif %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>No students to display. Please select a class to view students.</p>
    {% endif %}
</body>
{% include 'footer.html' %}
</html>
